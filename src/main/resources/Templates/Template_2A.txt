PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX b3: <https://dcm.ffclrp.usp.br/lssb/stock-market-ontology#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?individualTicker
WHERE {
  ?empresa rdfs:label #ENTIDADE_NOME#@pt . 

  ?empresa b3:representadoPor ?codigoInst . 
  ?codigoInst b3:ticker ?tickerConcatenado . 

  # Para extrair os tickers individuais, precisamos de uma solução mais complexa
  # Se você puder listar todos os tickers e depois filtrar, seria:
  ?qualquerCodigo b3:ticker ?individualTicker .
  FILTER(CONTAINS(STR(?tickerConcatenado), STR(?individualTicker)))
  FILTER(REGEX(STR(?individualTicker), "^[A-Z]{4}[0-9]{1,2}$"))
}
LIMIT 10