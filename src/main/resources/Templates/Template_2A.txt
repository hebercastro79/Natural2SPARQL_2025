# Template_2A.txt - Versão final e flexível
PREFIX b3: <https://dcm.ffclrp.usp.br/lssb/stock-market-ontology#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT DISTINCT ?ticker
WHERE {
  ?empresa rdfs:label #ENTIDADE_NOME# .
  ?empresa b3:temValorMobiliarioNegociado ?valorMobiliario .
  
  # Caminho flexível para o ticker:
  # Tenta ?valorMobiliario -> ticker OU ?valorMobiliario -> representadoPor -> ticker
  ?valorMobiliario (b3:ticker|(b3:representadoPor/b3:ticker)) ?ticker .
}
ORDER BY ?ticker