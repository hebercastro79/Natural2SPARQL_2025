# Template_3A: Busca todos os tickers de um SETOR específico.
# Ex: "Quais são as ações do setor bancário?"

PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX b3:   <https://dcm.ffclrp.usp.br/lssb/stock-market-ontology#>

SELECT DISTINCT ?ticker 
WHERE {
  # 1. Encontra a instância do setor pelo seu nome (label).
  ?setorUri rdfs:label #SETOR# . 
  
  # 2. Encontra todas as empresas que atuam nesse setor.
  ?empresa b3:atuaEm ?setorUri .
  
  # 3. Para cada empresa, segue o caminho até o seu ticker.
  # (Empresa -> Valor Mobiliário -> Código de Negociação -> ticker)
  ?empresa b3:temValorMobiliarioNegociado/b3:representadoPor/b3:ticker ?ticker .
}
ORDER BY ?ticker